(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb9fba9e"],{"44d2":function(t,e,s){var i=s("b622"),r=s("7c73"),n=s("9bf2"),o=i("unscopables"),a=Array.prototype;void 0==a[o]&&n.f(a,o,{configurable:!0,value:r(null)}),t.exports=function(t){a[o][t]=!0}},"4bde":function(t,e,s){"use strict";var i=s("88f2"),r=s.n(i);r.a},"586c":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"router-history"},[s("el-tabs",{attrs:{closable:!(1===t.historys.length&&this.$route.name===t.defaultRouter),type:"card"},on:{"tab-click":t.changeTab,"tab-remove":t.removeTab},nativeOn:{contextmenu:function(e){return e.preventDefault(),t.openContextMenu(e)}},model:{value:t.activeValue,callback:function(e){t.activeValue=e},expression:"activeValue"}},t._l(t.historys,(function(e){return s("el-tab-pane",{key:t.name(e),staticClass:"gva-tab",attrs:{label:e.meta.title,name:t.name(e),tab:e}},[s("span",{style:{color:t.activeValue===t.name(e)?t.activeColor:"#333"},attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"dot",style:{backgroundColor:t.activeValue===t.name(e)?t.activeColor:"#ddd"}}),t._v(" "+t._s(e.meta.title))])])})),1),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.contextMenuVisible,expression:"contextMenuVisible"}],staticClass:"contextmenu",style:{left:t.left+"px",top:t.top+"px"}},[s("li",{on:{click:t.closeAll}},[t._v("关闭所有")]),s("li",{on:{click:t.closeLeft}},[t._v("关闭左侧")]),s("li",{on:{click:t.closeRight}},[t._v("关闭右侧")]),s("li",{on:{click:t.closeOther}},[t._v("关闭其他")])])],1)},r=[],n=(s("4de4"),s("c740"),s("45fc"),s("a434"),s("b0c0"),s("ac1f"),s("1276"),s("5530")),o=s("5880"),a=function(t){return t.name+JSON.stringify(t.query)+JSON.stringify(t.params)},u={name:"HistoryComponent",data:function(){return{historys:[],activeValue:"",contextMenuVisible:!1,left:0,top:0,isCollapse:!1,isMobile:!1,rightActive:""}},computed:Object(n["a"])(Object(n["a"])({},Object(o["mapGetters"])("user",["userInfo","activeColor"])),{},{defaultRouter:function(){return this.userInfo.authority.defaultRouter}}),watch:{contextMenuVisible:function(){var t=this;this.contextMenuVisible?document.body.addEventListener("click",(function(){t.contextMenuVisible=!1})):document.body.removeEventListener("click",(function(){t.contextMenuVisible=!1}))},$route:function(t,e){this.historys=this.historys.filter((function(t){return!t.meta.closeTab})),this.setTab(t),sessionStorage.setItem("historys",JSON.stringify(this.historys)),this.activeValue=window.sessionStorage.getItem("activeValue"),e&&t&&e.name===t.name&&this.$bus.$emit("reload")}},created:function(){var t=this;this.$bus.on("mobile",(function(e){t.isMobile=e})),this.$bus.on("collapse",(function(e){t.isCollapse=e}));var e=[{name:this.defaultRouter,meta:{title:"首页"},query:{},params:{}}];this.historys=JSON.parse(sessionStorage.getItem("historys"))||e,window.sessionStorage.getItem("activeValue")?this.activeValue=window.sessionStorage.getItem("activeValue"):this.activeValue=a(this.$route),this.setTab(this.$route)},beforeDestroy:function(){this.$bus.off("collapse"),this.$bus.off("mobile")},methods:{name:function(t){return t.name+JSON.stringify(t.query)+JSON.stringify(t.params)},openContextMenu:function(t){if(1===this.historys.length&&this.$route.name===this.defaultRouter)return!1;var e,s="";("SPAN"===t.srcElement.nodeName?(console.log(t),s=t.srcElement.offsetParent.id):s=t.srcElement.id,s)&&(this.contextMenuVisible=!0,e=this.isCollapse?54:220,this.isMobile&&(e=0),this.left=t.clientX-e,this.top=t.clientY+10,this.rightActive=s.split("-")[1])},closeAll:function(){this.historys=[{name:this.defaultRouter,meta:{title:"首页"},query:{},params:{}}],this.$router.push({name:this.defaultRouter}),this.contextMenuVisible=!1,sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeLeft:function(){var t,e=this,s=this.historys.findIndex((function(s){return a(s)===e.rightActive&&(t=s),a(s)===e.rightActive})),i=this.historys.findIndex((function(t){return a(t)===e.activeValue}));this.historys.splice(0,s),s>i&&this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeRight:function(){var t,e=this,s=this.historys.findIndex((function(s){return a(s)===e.rightActive&&(t=s),a(s)===e.rightActive})),i=this.historys.findIndex((function(t){return a(t)===e.activeValue}));this.historys.splice(s+1,this.historys.length),s<i&&this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeOther:function(){var t,e=this;this.historys=this.historys.filter((function(s){return a(s)===e.rightActive&&(t=s),a(s)===e.rightActive})),this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},isSame:function(t,e){if(t.name!==e.name)return!1;for(var s in t.query)if(t.query[s]!==e.query[s])return!1;for(var i in t.params)if(t.params[i]!==e.params[i])return!1;return!0},setTab:function(t){var e=this;if(!this.historys.some((function(s){return e.isSame(s,t)}))){var s={};s.name=t.name,s.meta=t.meta,s.query=t.query,s.params=t.params,this.historys.push(s)}window.sessionStorage.setItem("activeValue",a(this.$route))},changeTab:function(t){var e=t.$attrs.tab;this.$router.push({name:e.name,query:e.query,params:e.params})},removeTab:function(t){var e=this.historys.findIndex((function(e){return a(e)===t}));a(this.$route)===t&&(1===this.historys.length?this.$router.push({name:this.defaultRouter}):e<this.historys.length-1?this.$router.push({name:this.historys[e+1].name,query:this.historys[e+1].query,params:this.historys[e+1].params}):this.$router.push({name:this.historys[e-1].name,query:this.historys[e-1].query,params:this.historys[e-1].params})),this.historys.splice(e,1)}}},h=u,c=(s("4bde"),s("2877")),l=Object(c["a"])(h,i,r,!1,null,null,null);e["default"]=l.exports},"88f2":function(t,e,s){},a434:function(t,e,s){"use strict";var i=s("23e7"),r=s("23cb"),n=s("a691"),o=s("50c4"),a=s("7b0b"),u=s("65f0"),h=s("8418"),c=s("1dde"),l=s("ae40"),f=c("splice"),m=l("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,d=Math.min,v=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var s,i,c,l,f,m,b=a(this),g=o(b.length),x=r(t,g),S=arguments.length;if(0===S?s=i=0:1===S?(s=0,i=g-x):(s=S-2,i=d(y(n(e),0),g-x)),g+s-i>v)throw TypeError(p);for(c=u(b,i),l=0;l<i;l++)f=x+l,f in b&&h(c,l,b[f]);if(c.length=i,s<i){for(l=x;l<g-i;l++)f=l+i,m=l+s,f in b?b[m]=b[f]:delete b[m];for(l=g;l>g-i+s;l--)delete b[l-1]}else if(s>i)for(l=g-i;l>x;l--)f=l+i-1,m=l+s-1,f in b?b[m]=b[f]:delete b[m];for(l=0;l<s;l++)b[l+x]=arguments[l+2];return b.length=g-i+s,c}})},c740:function(t,e,s){"use strict";var i=s("23e7"),r=s("b727").findIndex,n=s("44d2"),o=s("ae40"),a="findIndex",u=!0,h=o(a);a in[]&&Array(1)[a]((function(){u=!1})),i({target:"Array",proto:!0,forced:u||!h},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(a)}}]);